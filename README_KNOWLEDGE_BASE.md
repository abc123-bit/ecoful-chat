# çŸ¥è¯†åº“ç®¡ç†ç³»ç»Ÿ

åŸºäºç°æœ‰ecoful-chaté¡¹ç›®ï¼Œæ–°å¢å®Œæ•´çš„çŸ¥è¯†åº“ç®¡ç†å’ŒRAGé—®ç­”åŠŸèƒ½ã€‚

## ğŸš€ æ–°å¢åŠŸèƒ½

### ğŸ“š çŸ¥è¯†åº“ç®¡ç†
- **åˆ›å»ºçŸ¥è¯†åº“**: æ”¯æŒè‡ªå®šä¹‰åˆ†å—å‚æ•°å’Œé…ç½®
- **æ–‡ä»¶ä¸Šä¼ **: æ”¯æŒPDFã€Wordã€Excelã€PowerPointã€æ–‡æœ¬ç­‰å¤šç§æ ¼å¼
- **æ–‡ä»¶å¤„ç†**: è‡ªåŠ¨æ–‡æœ¬æå–å’Œåˆ†å—å¤„ç†
- **å‘é‡åŒ–**: é›†æˆç™¾ç‚¼å¹³å°è¿›è¡Œæ–‡æœ¬å‘é‡åŒ–
- **å‘é‡å­˜å‚¨**: ä½¿ç”¨Chromaå‘é‡æ•°æ®åº“å­˜å‚¨

### ğŸ¤– æ™ºèƒ½é—®ç­”
- **RAGé—®ç­”**: åŸºäºçŸ¥è¯†åº“çš„æ£€ç´¢å¢å¼ºç”Ÿæˆ
- **æµå¼å“åº”**: æ”¯æŒå®æ—¶æµå¼å›ç­”
- **æº¯æºåŠŸèƒ½**: æ˜¾ç¤ºç­”æ¡ˆæ¥æºæ–‡ä»¶å’Œç›¸å…³æ®µè½
- **å¯¹è¯å†å²**: å®Œæ•´çš„å¯¹è¯è®°å½•å’Œç®¡ç†

### ğŸ’¾ æ•°æ®å­˜å‚¨
- **PostgreSQL**: å­˜å‚¨çŸ¥è¯†åº“ã€æ–‡ä»¶ã€å¯¹è¯ç­‰ç»“æ„åŒ–æ•°æ®
- **MinIO**: å¯¹è±¡å­˜å‚¨ï¼Œä¿å­˜åŸå§‹æ–‡ä»¶
- **Chroma**: å‘é‡æ•°æ®åº“ï¼Œå­˜å‚¨æ–‡æ¡£å‘é‡
- **Redis**: ç¼“å­˜å’Œä¼šè¯ç®¡ç†

## ğŸ“‹ ç³»ç»Ÿæ¶æ„

```
å‰ç«¯ (Vue 3 + Ant Design Vue)
â”œâ”€â”€ çŸ¥è¯†åº“ç®¡ç†é¡µé¢
â”œâ”€â”€ æ–‡ä»¶ä¸Šä¼ å’Œå¤„ç†
â”œâ”€â”€ æ™ºèƒ½é—®ç­”ç•Œé¢
â””â”€â”€ æ–‡ä»¶æº¯æºæŸ¥çœ‹

åç«¯ (FastAPI)
â”œâ”€â”€ çŸ¥è¯†åº“ç®¡ç†API
â”œâ”€â”€ æ–‡ä»¶å¤„ç†æœåŠ¡
â”œâ”€â”€ å‘é‡åŒ–æœåŠ¡
â”œâ”€â”€ é—®ç­”API
â””â”€â”€ å¯¹è¯ç®¡ç†

æ•°æ®å±‚
â”œâ”€â”€ PostgreSQL (ç»“æ„åŒ–æ•°æ®)
â”œâ”€â”€ MinIO (æ–‡ä»¶å­˜å‚¨)
â”œâ”€â”€ Chroma (å‘é‡æ•°æ®åº“)
â””â”€â”€ Redis (ç¼“å­˜)

AIæœåŠ¡
â”œâ”€â”€ ç™¾ç‚¼å¹³å° (æ–‡æœ¬å‘é‡åŒ–)
â””â”€â”€ ç™¾ç‚¼å¹³å° (é—®ç­”ç”Ÿæˆ)
```

## ğŸ› ï¸ å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Python 3.11+
- Node.js 16+
- PostgreSQL 15+
- Redis 7+
- MinIO
- Chroma DB

### åç«¯éƒ¨ç½²

1. **è¿›å…¥åç«¯ç›®å½•**
```bash
cd backend
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®ä»¥ä¸‹å‚æ•°ï¼š

# æ•°æ®åº“é…ç½®
DATABASE_URL=postgresql://username:password@localhost:5432/knowledge_base

# Redisé…ç½®
REDIS_URL=redis://localhost:6379

# MinIOé…ç½®
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_NAME=knowledge-base

# ç™¾ç‚¼å¹³å°é…ç½®
BAILIAN_API_KEY=your_bailian_api_key
BAILIAN_ENDPOINT=https://dashscope.aliyuncs.com/api/v1

# Chromaé…ç½®
CHROMA_HOST=localhost
CHROMA_PORT=8000
```

4. **ä½¿ç”¨Dockerå¯åŠ¨ä¾èµ–æœåŠ¡**
```bash
docker-compose up -d
```

5. **åˆå§‹åŒ–æ•°æ®åº“**
```bash
python manage_db.py create-db
python manage_db.py migrate "Initial migration"
python manage_db.py upgrade
```

6. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload
```

### å‰ç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**
```bash
npm install
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# åœ¨ .env æ–‡ä»¶ä¸­æ·»åŠ :
VITE_API_BASE_URL=http://localhost:8080/api/v1
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

4. **æ„å»ºç”Ÿäº§ç‰ˆæœ¬**
```bash
npm run build
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åˆ›å»ºçŸ¥è¯†åº“

1. è®¿é—® `http://localhost:3000/knowledge-base`
2. ç‚¹å‡»"æ–°å»ºçŸ¥è¯†åº“"æŒ‰é’®
3. å¡«å†™çŸ¥è¯†åº“åç§°ã€æè¿°ç­‰ä¿¡æ¯
4. è®¾ç½®åˆ†å—å‚æ•°ï¼ˆå»ºè®®ï¼šåˆ†å—å¤§å°1000ï¼Œé‡å 200ï¼‰
5. ç‚¹å‡»"åˆ›å»º"å®Œæˆ

### ä¸Šä¼ æ–‡ä»¶

1. é€‰æ‹©å·²åˆ›å»ºçš„çŸ¥è¯†åº“
2. ç‚¹å‡»"ä¸Šä¼ æ–‡ä»¶"æŒ‰é’®
3. é€‰æ‹©æ”¯æŒçš„æ–‡ä»¶æ ¼å¼ï¼š
   - PDFæ–‡æ¡£
   - Wordæ–‡æ¡£ (.docx, .doc)
   - Excelè¡¨æ ¼ (.xlsx, .xls)
   - PowerPointæ¼”ç¤ºæ–‡ç¨¿ (.pptx, .ppt)
   - çº¯æ–‡æœ¬æ–‡ä»¶ (.txt, .md)
   - å›¾ç‰‡æ–‡ä»¶ (.jpg, .png, .gif)

4. ç­‰å¾…æ–‡ä»¶å¤„ç†å®Œæˆï¼ˆçŠ¶æ€æ˜¾ç¤ºä¸º"å·²å®Œæˆ"ï¼‰

### æ™ºèƒ½é—®ç­”

1. é€‰æ‹©çŸ¥è¯†åº“åç‚¹å‡»"å¼€å§‹é—®ç­”"
2. æˆ–è®¿é—®èŠå¤©é¡µé¢å¹¶åœ¨URLä¸­æŒ‡å®šçŸ¥è¯†åº“IDï¼š`/chat?kb=1`
3. è¾“å…¥é—®é¢˜ï¼Œç³»ç»Ÿä¼šï¼š
   - åœ¨çŸ¥è¯†åº“ä¸­æœç´¢ç›¸å…³å†…å®¹
   - åŸºäºæœç´¢ç»“æœç”Ÿæˆå›ç­”
   - æ˜¾ç¤ºç­”æ¡ˆæ¥æºæ–‡ä»¶

### æŸ¥çœ‹æ–‡ä»¶å†…å®¹

1. åœ¨æ–‡ä»¶ç®¡ç†æ ‡ç­¾é¡µä¸­ç‚¹å‡»"æŸ¥çœ‹"
2. å¯ä»¥æŸ¥çœ‹æå–çš„æ–‡æœ¬å†…å®¹
3. æŸ¥çœ‹æ–‡ä»¶å¤„ç†çŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯

## ğŸ”§ é…ç½®è¯´æ˜

### åˆ†å—å‚æ•°ä¼˜åŒ–

| æ–‡ä»¶ç±»å‹ | æ¨èåˆ†å—å¤§å° | æ¨èé‡å  |
|----------|-------------|----------|
| é•¿æ–‡æ¡£ | 1500-2000 | 200-300 |
| çŸ­æ–‡æ¡£ | 800-1200 | 100-200 |
| ä»£ç æ–‡ä»¶ | 1000-1500 | 150-250 |
| è¡¨æ ¼æ•°æ® | 500-1000 | 50-100 |

### ç™¾ç‚¼å¹³å°é…ç½®

1. æ³¨å†Œé˜¿é‡Œäº‘è´¦å·
2. å¼€é€šç™¾ç‚¼å¹³å°æœåŠ¡
3. è·å–APIå¯†é’¥
4. é…ç½®ç¯å¢ƒå˜é‡ä¸­çš„`BAILIAN_API_KEY`

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

- **æ•°æ®åº“**: é…ç½®PostgreSQLè¿æ¥æ± 
- **ç¼“å­˜**: å¯ç”¨Redisç¼“å­˜é¢‘ç¹æŸ¥è¯¢
- **æ–‡ä»¶å­˜å‚¨**: MinIOé…ç½®å¤šå‰¯æœ¬
- **å‘é‡åº“**: Chromaé…ç½®æŒä¹…åŒ–å­˜å‚¨

## ğŸ› å¸¸è§é—®é¢˜

### æ–‡ä»¶ä¸Šä¼ å¤±è´¥
- æ£€æŸ¥æ–‡ä»¶å¤§å°æ˜¯å¦è¶…è¿‡100MBé™åˆ¶
- ç¡®è®¤æ–‡ä»¶æ ¼å¼æ˜¯å¦æ”¯æŒ
- æ£€æŸ¥MinIOæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

### å‘é‡åŒ–å¤±è´¥
- æ£€æŸ¥ç™¾ç‚¼å¹³å°APIå¯†é’¥æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
- æ£€æŸ¥APIé…é¢æ˜¯å¦å……è¶³

### é—®ç­”æ— ç»“æœ
- ç¡®è®¤çŸ¥è¯†åº“ä¸­æœ‰å·²å¤„ç†å®Œæˆçš„æ–‡ä»¶
- æ£€æŸ¥å‘é‡æ•°æ®åº“è¿æ¥
- å°è¯•è°ƒæ•´æœç´¢å‚æ•°

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

- **æ—¥å¿—ä½ç½®**: `backend/logs/`
- **APIæ–‡æ¡£**: `http://localhost:8080/docs`
- **å¥åº·æ£€æŸ¥**: `http://localhost:8080/health`

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ•°æ®åº“è¿ç§»
```bash
python manage_db.py migrate "migration description"
python manage_db.py upgrade
```

### å¤‡ä»½æ¢å¤
```bash
# å¤‡ä»½æ•°æ®åº“
pg_dump knowledge_base > backup.sql

# å¤‡ä»½MinIOæ•°æ®
mc mirror minio/knowledge-base ./backup/files/

# å¤‡ä»½Chromaæ•°æ®
cp -r ./chroma_data ./backup/vectors/
```

## ğŸ“„ License

MIT License - åŸºäºåŸé¡¹ç›®Licenseç»§æ‰¿